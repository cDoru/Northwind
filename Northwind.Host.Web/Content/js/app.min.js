;Northwind=Ember.Application.create(),Northwind.store=DS.Store.extend()
;Northwind.Common=Ember.Namespace.create({})
;Northwind.Common.Uri=Ember.Object.create({queryParams:function(a){var b={};if(a){var c=/\\?([^?=&]+)(=([^&#]*))?/g;a.replace(c,function(a,c,d,e){typeof e=="string"&&(b[c]=decodeURIComponent(e))})}return b}})
;Northwind.Common.Components=Ember.Namespace.create({Grid:Ember.Namespace.create()})
;Northwind.Common.Components.Grid.Pagination=Ember.Mixin.create({totalCount:0,limit:0,page:0,metadata:null,paginableContentBinding:"content",offset:function(){var a=this.get("page"),b=this.get("limit");return a*b+1}.property("page"),paginatedContent:function(){return this.get("page")>=this.get("pages")&&this.set("page",0),this.get("content")}.property("@each","page","limit"),pages:function(){return Math.ceil(this.get("totalCount")/this.get("limit"))}.property("totalCount","limit"),firstPage:function(){this.set("page",0)},previousPage:function(){this.set("page",Math.max(this.get("page")-1,0))},nextPage:function(){this.set("page",Math.min(this.get("page")+1,this.get("pages")-1))},lastPage:function(){this.set("page",this.get("pages")-1)}})
;Northwind.Common.Components.Grid.Column=Ember.Object.extend({property:null,display:!0,formatter:"{{view.content.%@}}",header:function(){return this.get("property")?this.get("property").capitalize():""}.property("property"),visible:function(){return this.get("display")!=0}.property("display"),always:function(){return this.get("display")==="always"}.property("display"),viewClass:function(){var a=this.get("formatter");if(Northwind.Common.Components.Grid.CellView.detect(a))return a;Ember.assert("Formatter has to extend CellView or Handlebar template",Ember.typeOf(a)==="string");var b=this.get("property");b||(b="constructor");var c=this.get("formatter").fmt(b);return Northwind.Common.Components.Grid.CellView.extend({template:Ember.Handlebars.compile(c)})}.property()}),Northwind.Common.Components.Grid.column=function(a,b){Ember.typeOf(a)==="object"&&(b=a,a=null);var c=Northwind.Common.Components.Grid.Column.create({property:a});if(b)for(var d in b)c.set(d,b[d]);return c}
;Northwind.Common.Components.Grid.GridController=Ember.ArrayController.extend(Northwind.Common.Components.Grid.Pagination,{columns:[],paginableContentBinding:"content",rowsBinding:"paginatedContent",visibleColumns:function(){return this.get("columns").filterProperty("visible",!0)}.property("columns.@each.visible")})
;Northwind.Common.Components.Grid.GridView=Ember.View.extend({classNames:["grid"],defaultTemplate:Ember.Handlebars.compile("{{view Northwind.Common.Components.Grid.TableView}}")})
;Northwind.Common.Components.Grid.PageListView=Ember.ContainerView.extend({tagName:"ul",classNames:["pagination","pagination-sm"],pages:[],visiblePages:3,firstPageView:Ember.View.extend({tagName:"li",classNameBindings:["parentView.hasFirstPage::disabled"],template:Ember.Handlebars.compile('<a href="javascript:void(0);" {{action firstPage target="view.parentView"}}>&laquo;</a>')}),prevPageView:Ember.View.extend({tagName:"li",classNameBindings:["parentView.hasPreviousPage::disabled"],template:Ember.Handlebars.compile('<a href="javascript:void(0);" {{action prevPage target="view.parentView"}}>&lsaquo;</a>')}),pageView:Ember.View.extend({tagName:"li",classNameBindings:["content.isActive:active"],template:Ember.Handlebars.compile('<a href="javascript:void(0);" {{action setPage view.content target="view.parentView"}}>{{view.content.page}}</a>')}),nextPageView:Ember.View.extend({tagName:"li",classNameBindings:["parentView.hasNextPage::disabled"],template:Ember.Handlebars.compile('<a href="javascript:void(0);" {{action nextPage target="view.parentView"}}>&rsaquo;</a>')}),lastPageView:Ember.View.extend({tagName:"li",classNameBindings:["parentView.hasLastPage::disabled"],template:Ember.Handlebars.compile('<a href="javascript:void(0);" {{action lastPage target="view.parentView"}}>&raquo;</a>')}),refreshPageListItems:function(){var a=this.get("pages");if(!a.get("length"))return;this.clear(),this.pushObject(this.get("firstPageView").create()),this.pushObject(this.get("prevPageView").create());var b=this;this.get("pages").forEach(function(a){var c=b.get("pageView").create({content:a});b.pushObject(c)}),this.pushObject(this.get("nextPageView").create()),this.pushObject(this.get("lastPageView").create())}.observes("pages"),createPages:function(){if(!this.get("controller"))return[];var a=this.get("controller.page"),b=this.get("controller.pages"),c=Math.max(0,a-this.visiblePages),d=Math.min(b,a+this.visiblePages+1),e=this.get("controller.limit"),b=[];for(var f=c;f<d;f++)b.push({index:f,page:f+1,isActive:f==a});this.set("pages",b)},didControllerContentChanged:function(){this.createPages();var a=this.get("controller.pages"),b=this.get("controller.page");this.set("pagesCount",a),this.set("hasNextPage",b+1<a),this.set("hasPreviousPage",b>0),this.set("hasFirstPage",b>0),this.set("hasLastPage",b+1<a)}.observes("controller.offset","controller.pages","controller.page").on("init"),actions:{setPage:function(a){this.get("controller").set("page",a.index)},firstPage:function(){if(!this.get("hasFirstPage"))return;this.get("controller").firstPage()},lastPage:function(){if(!this.get("hasLastPage"))return;this.get("controller").lastPage()},prevPage:function(){if(!this.get("hasPreviousPage"))return;this.get("controller").previousPage()},nextPage:function(){if(!this.get("hasNextPage"))return;this.get("controller").nextPage()}},init:function(){this._super(),this.refreshPageListItems()}})
;Northwind.Common.Components.Grid.PageView=Ember.View.extend({classNames:["pull-left","table-page"],defaultTemplate:Ember.Handlebars.compile("Showing {{controller.offset}} - {{view.last}} from {{controller.totalCount}}"),didPageChange:function(){var a=this.get("controller.limit"),b=this.get("controller.totalCount"),c=this.get("controller.offset");this.set("first",c),this.set("last",Math.min(b,c-1+a))}.observes("controller.offset","controller.limit","controller.totalCount").on("init")})
;Northwind.Common.Components.Grid.PaginationView=Ember.ContainerView.extend({tagName:"div",classNames:["pull-right","table-pagination"],childViews:["pageList"],pageList:Northwind.Common.Components.Grid.PageListView.create()})
;Northwind.Common.Components.Grid.TableView=Ember.View.extend({tagName:"table",classNames:["table-bordered","table-striped","table-condensed"],defaultTemplate:function(){var a="<thead>{{view Northwind.Common.Components.Grid.HeaderView}}</thead>",b="{{view Northwind.Common.Components.Grid.BodyView}}",c="{{view Northwind.Common.Components.Grid.FooterView}}";return Ember.Handlebars.compile(a+b+c)}.property()})
;Northwind.Common.Components.Grid.HeaderView=Ember.CollectionView.extend({tagName:"tr",contentBinding:"controller.visibleColumns",itemViewClass:Ember.View.extend({tagName:"th",classNames:["table-header-cell"],template:Ember.Handlebars.compile("{{view.content.header}}")})})
;Northwind.Common.Components.Grid.BodyView=Ember.CollectionView.extend({tagName:"tbody",contentBinding:"controller.rows",classNames:["table-body"],itemViewClass:"Northwind.Common.Components.Grid.RowView",emptyView:Ember.View.extend({tagName:"tr",template:Ember.Handlebars.compile('<td {{bindAttr colspan="controller.columns.length"}} class="muted">No hay elementos</td>')})})
;Northwind.Common.Components.Grid.RowView=Ember.ContainerView.extend({tagName:"tr",classNames:["table-row"],rowBinding:"content",columnsBinding:"controller.visibleColumns",columnsDidChange:function(){this.get("columns")&&(this.clear(),this.get("columns").forEach(function(a){var b=a.get("viewClass").create({column:a,content:this.get("row")});this.pushObject(b)},this))}.observes("columns.@each"),init:function(){this._super(),this.columnsDidChange()}})
;Northwind.Common.Components.Grid.CellView=Ember.View.extend({tagName:"td"})
;Northwind.Common.Components.Grid.FooterView=Ember.ContainerView.extend({tagName:"tfoot",classNames:["table-footer","text-muted"],childViews:["gridFooter"],gridFooter:Ember.View.create({tagName:"tr",template:Ember.Handlebars.compile('<td {{bindAttr colspan="controller.columns.length"}}>{{view Northwind.Common.Components.Grid.PageView}}{{view Northwind.Common.Components.Grid.PaginationView}}</td>')})})
;Northwind.ApplicationAdapter=DS.RESTAdapter.extend({host:"http://localhost:2828",serializer:Northwind.ApplicationSerializer})
;Northwind.ApplicationSerializer=DS.RESTSerializer.extend({extractArray:function(a,b,c){return delete c.count,this.extractMeta(a,b,c),this._super(a,b,c)},extractMeta:function(a,b,c){c&&c.metadata&&(a.metaForType(b,c.metadata),delete c.metadata)},serializeIntoHash:function(a,b,c,d){Ember.merge(a,this.serialize(c,d))}})
;Northwind.Router.map(function(){this.resource("customers",function(){this.resource("customer",{path:":customer_id"},function(){this.route("orders")})}),this.resource("about")}),Northwind.Router.reopen({location:"history"})
;Northwind.CustomersRoute=Ember.Route.extend({model:function(){var a=this.controllerFor("customer");return this.get("store").findQuery("customer",{offset:a.offset,limit:a.limit})},setupController:function(a,b){a.set("content",b),a.set("contentLoaded",!0)}})
;Northwind.CustomerRoute=Ember.Route.extend({model:function(a){return this.get("store").find("customer",a.customer_id)}})
;Northwind.ObjectController=Ember.ObjectController.extend({isEditing:!1,actions:{edit:function(){this.set("isEditing",!0)},acceptChanges:function(){this.set("isEditing",!1),this.get("model.isSaveable")?this.send("save"):(console.log("NOT isSaveable"),this.send("remove"))},save:function(){this.get("model").save()},remove:function(){this.get("model").deleteRecord(),this.send("save")}}})
;Northwind.ArrayController=Northwind.Common.Components.Grid.GridController.extend({contentLoaded:!1,modelType:Ember.computed(function(){var a=this.get("model");return a.type}),loadMetadata:function(){if(!this.get("contentLoaded"))return;var a=this.get("model"),b=this.get("store").metadataFor(a.type);if(b){var c=Ember.Object.create({offset:b.offset,limit:b.limit,totalCount:b.totalCount,links:Ember.makeArray()});if(b.links)for(var d in b.links){var e=Ember.Object.create(Northwind.Common.Uri.queryParams(b.links[d]));e.set("rel",d),c.links.pushObject(e)}this.set("metadata",c),this.set("limit",c.limit),this.set("totalCount",c.totalCount)}}.observes("contentLoaded"),refresh:function(){var a=this.get("offset"),b=this.get("limit"),c=this.get("modelType"),d=this;d.set("contentLoaded",!1),this.get("store").findQuery(c,{offset:a,limit:b}).then(function(a){d.set("model",a),d.set("contentLoaded",!0)})}.observes("page")})
;Northwind.CustomerController=Northwind.ObjectController.extend({})
;Northwind.CustomersController=Northwind.ArrayController.extend({itemController:"customer",columns:[Northwind.Common.Components.Grid.column("id",{formatter:"{{#link-to 'customer' view.content}}{{view.content.id}}{{/link-to}}"}),Northwind.Common.Components.Grid.column("contactName"),Northwind.Common.Components.Grid.column("companyName"),Northwind.Common.Components.Grid.column("contactTitle")]})
;Northwind.TextEditView=Ember.TextField.extend({didInsertElement:function(){this.$().focus()}}),Ember.Handlebars.helper("text-edit",Northwind.TextEditView)
;
;Northwind.Model=DS.Model.extend({required:[],isSaveable:function(){var a=this.get("required"),b=this;return a.forEach(function(a){if(!b.get(a))return!1}),!0}.property("required")})
;Northwind.Customer=Northwind.Model.extend({companyName:DS.attr("string"),contactName:DS.attr("string"),contactTitle:DS.attr("string"),address:DS.attr("string"),city:DS.attr("string"),region:DS.attr("string"),postalCode:DS.attr("string"),country:DS.attr("string"),phone:DS.attr("string"),fax:DS.attr("string"),orders:DS.hasMany("order")}),Northwind.Customer.reopen({required:["contactName","companyName"]})
;Northwind.Order=Northwind.Model.extend({employeeId:DS.attr("long"),orderDate:DS.attr("string"),requiredDate:DS.attr("string"),shippedDate:DS.attr("string"),freight:DS.attr("decimal"),shipName:DS.attr("string"),shipAddress:DS.attr("string"),shipCity:DS.attr("string"),shipRegion:DS.attr("string"),shipPostalCode:DS.attr("string"),shipCountry:DS.attr("string"),customer:DS.belongsTo("customer"),details:DS.hasMany("orderDetail")})
;Northwind.OrderDetail=Northwind.Model.extend({productId:DS.attr("long"),unitPrice:DS.attr("decimal"),quantity:DS.attr("long"),discount:DS.attr("double"),order:DS.belongsTo("order")})
;Northwind.Supplier=DS.Model.extend({companyName:DS.attr("string"),contactName:DS.attr("string"),contactTitle:DS.attr("string"),address:DS.attr("string"),city:DS.attr("string"),region:DS.attr("string"),postalCode:DS.attr("string"),country:DS.attr("string"),phone:DS.attr("string"),fax:DS.attr("string"),homePage:DS.attr("string")})
